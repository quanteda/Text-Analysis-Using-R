<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Text Analysis Using R - 1&nbsp; Introduction and Motivation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./02-r-basics.html" rel="next">
<link href="./authors.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script src="site_libs/kePrint-0.0.1/kePrint.js"></script><link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction and Motivation</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Text Analysis Using R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/quanteda/Text-Analysis-Using-R" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./authors.html" class="sidebar-item-text sidebar-link">About the Authors</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction and Motivation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">R</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-r-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-r-workflow.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Workflow</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-r-strings.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Working with Text in R</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Acquiring Texts</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-acquiring-files.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Working with Files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-acquiring-packages.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Using Text Import Tools</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-acquiring-internet.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Obtaining Texts from the Internet</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Managing Textual Data Using quanteda</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-quanteda-overview.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introducing the <strong>quanteda</strong> Package</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-quanteda-corpus.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Creating and Managing Corpora</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-quanteda-tokens.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Creating and Managing tokens</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-quanteda-tokensadvanced.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Advanced Token Manipulation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-quanteda-dictionaries.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Creating and Managing Dictionaries</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-quanteda-dfms.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Building Document-Feature Matrices</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Exploring and Describing Texts</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-exploring-description.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Describing Texts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-exploring-kwic.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Keywords-in-Context</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-exploring-dictionaries.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Applying Dictionaries</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-exploring-frequencies.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Most Frequent Words</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">Statistics for Comparing Texts</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-comparing-sophistication.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Profiling Lexical Patterns and Usage</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-comparing-documents.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Document Similarity and Distance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-comparing-features.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Feature Similarity and Distance</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">Machine Learning for Texts</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-ml-supervised-scaling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Supervised Document Scaling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-ml-unsupervised-scaling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Unsupervised Document Scaling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-ml-classifiers.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Methods for Text Classification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-ml-embedding.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Word Embedding Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-ml-topicmodels.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Topic modelling</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">Further Methods for Texts</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-further-advanced-nlp.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Advanced NLP using R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./27-further-tidy.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Integrating “tidy” approaches</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./28-further-hardlanguages.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Text analysis in “Hard” Languages</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./29-appendix-installation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Installing the Required Tools</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30-appendix-encoding.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Everything You Never Wanted to Know about Encoding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31-appendix-regex.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">A Survival Guide to Regular Expressions</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives"> <span class="header-section-number">1.1</span> Objectives</a></li>
  <li>
<a href="#application-analyzing-candidate-debates-from-the-us-presidential-election-campaign-of-2020" id="toc-application-analyzing-candidate-debates-from-the-us-presidential-election-campaign-of-2020" class="nav-link" data-scroll-target="#application-analyzing-candidate-debates-from-the-us-presidential-election-campaign-of-2020"> <span class="header-section-number">1.2</span> Application: Analyzing Candidate Debates from the US Presidential Election Campaign of 2020</a>
  <ul class="collapse">
<li><a href="#acquiring-text-directly-from-the-world-wide-web." id="toc-acquiring-text-directly-from-the-world-wide-web." class="nav-link" data-scroll-target="#acquiring-text-directly-from-the-world-wide-web."> <span class="header-section-number">1.2.1</span> Acquiring text directly from the world wide web.</a></li>
  <li><a href="#creating-a-text-corpus" id="toc-creating-a-text-corpus" class="nav-link" data-scroll-target="#creating-a-text-corpus"> <span class="header-section-number">1.2.2</span> Creating a text corpus</a></li>
  <li><a href="#tokenizing-a-corpus" id="toc-tokenizing-a-corpus" class="nav-link" data-scroll-target="#tokenizing-a-corpus"> <span class="header-section-number">1.2.3</span> Tokenizing a corpus</a></li>
  <li><a href="#keywords-in-context" id="toc-keywords-in-context" class="nav-link" data-scroll-target="#keywords-in-context"> <span class="header-section-number">1.2.4</span> Keywords-in-context</a></li>
  <li><a href="#text-processing" id="toc-text-processing" class="nav-link" data-scroll-target="#text-processing"> <span class="header-section-number">1.2.5</span> Text processing</a></li>
  <li><a href="#identifying-multiword-expressions" id="toc-identifying-multiword-expressions" class="nav-link" data-scroll-target="#identifying-multiword-expressions"> <span class="header-section-number">1.2.6</span> Identifying multiword expressions</a></li>
  <li><a href="#document-feature-matrix" id="toc-document-feature-matrix" class="nav-link" data-scroll-target="#document-feature-matrix"> <span class="header-section-number">1.2.7</span> Document-feature matrix</a></li>
  <li><a href="#bringing-it-all-together-sentiment-analysis" id="toc-bringing-it-all-together-sentiment-analysis" class="nav-link" data-scroll-target="#bringing-it-all-together-sentiment-analysis"> <span class="header-section-number">1.2.8</span> Bringing it all together: Sentiment analysis</a></li>
  </ul>
</li>
  <li><a href="#issues" id="toc-issues" class="nav-link" data-scroll-target="#issues"> <span class="header-section-number">1.3</span> Issues</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"> <span class="header-section-number">1.4</span> Further Reading</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"> <span class="header-section-number">1.5</span> Exercises</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/quanteda/Text-Analysis-Using-R/edit/master/01-intro.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="intro" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction and Motivation</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><section id="objectives" class="level2" data-number="1.1"><h2 data-number="1.1" class="anchored" data-anchor-id="objectives">
<span class="header-section-number">1.1</span> Objectives</h2>
<p>To dive right in to text analysis using R, by means of an extended demonstration of how to acquire, process, quantify, and analyze a series of texts. The objective is to demonstrate the techniques covered in the book and the tools required to apply them.</p>
<p>This overview is intended to serve more as a demonstration of the kinds of natural language processing and text analysis that can be done powerfully and easily in R, rather than as primary instructional material. Starting in Chapter @ref(rbasics), you learn about the R fundamentals and work our way gradually up to basic and then more advanced text analysis. Until then, enjoy the demonstration, and don’t be discouraged if it seems too advanced to follow at this stage. By the time you have finished this book, this sort of analysis will be very familiar.</p>
</section><section id="application-analyzing-candidate-debates-from-the-us-presidential-election-campaign-of-2020" class="level2" data-number="1.2"><h2 data-number="1.2" class="anchored" data-anchor-id="application-analyzing-candidate-debates-from-the-us-presidential-election-campaign-of-2020">
<span class="header-section-number">1.2</span> Application: Analyzing Candidate Debates from the US Presidential Election Campaign of 2020</h2>
<p>The methods demonstrated in this chapter include:</p>
<ul>
<li>acquiring texts directly from the world-wide web;</li>
<li>creating a corpus from the texts, with associated document-level variables;</li>
<li>segmenting the texts by sections found in each document;</li>
<li>cleaning up the texts further;</li>
<li>tokenizing the texts into words;</li>
<li>summarizing the texts in terms of who spoke and how much;</li>
<li>examining keywords-in-context from the texts, and identifying keywords using statistical association measures;</li>
<li>transforming and selecting features using lower-casing, stemming, and removing punctuation and numbers;</li>
<li>removing selected features in the form of “stop words”;</li>
<li>creating a document-feature matrix from the tokens;</li>
<li>performing sentiment analysis on the texts;</li>
<li>fitting topic models on the texts.</li>
</ul>
<p>For demonstration, we will use the corpus of televised debate transcripts from the U.S. Presidential election campaign of 2020. Donald Trump and Joe Biden participated in two televised debates. The first debate took place in Cleveland, Ohio, on 29 September 2020. The two candidates met again in Nashville, Tennessee on 10 December.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<section id="acquiring-text-directly-from-the-world-wide-web." class="level3" data-number="1.2.1"><h3 data-number="1.2.1" class="anchored" data-anchor-id="acquiring-text-directly-from-the-world-wide-web.">
<span class="header-section-number">1.2.1</span> Acquiring text directly from the world wide web.</h3>
<p>Full transcripts of both televized debates are available from <a href="https://www.presidency.ucsb.edu/documents/app-categories/elections-and-transitions/debates">The American Presidency Project</a>. We start our demonstration by scraping the debates using the <strong>rvest</strong> package <span class="citation" data-cites="rvest">(<a href="references.html#ref-rvest" role="doc-biblioref">Wickham 2021</a>)</span>. You will learn more about scraping data from the internet in Chapter @ref(acquire-internet). We first need to install and load the packages required for this demonstration.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># install packages</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"quanteda"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"quanteda.textstats"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"quanteda.textplots"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"rvest"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"stringr"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"quanteda/quanteda.tidy"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># load packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://quanteda.io">"quanteda"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://rvest.tidyverse.org/">"rvest"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="http://stringr.tidyverse.org">"stringr"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://quanteda.io">"quanteda.textstats"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st">"quanteda.textplots"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st">"quanteda.tidy"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we identify the presidential debates for the 2020 period, assign the URL of the debates to an object, and load the source page. We retrieve metadata (the location and dates of the debates), store the information as a data frame, and get the URL debates. Finally, we scrape the search results and save the texts as a character vector, with one element per debate.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># search presidential debates for the 2020 period</span></span>
<span><span class="co"># https://www.presidency.ucsb.edu/advanced-search?field-keywords=&amp;field-keywords2=&amp;field-keywords3=&amp;from%5Bdate%5D=01-01-2020&amp;to%5Bdate%5D=12-31-2020&amp;person2=200301&amp;category2%5B%5D=64&amp;items_per_page=50</span></span>
<span></span>
<span><span class="co"># assign URL of debates to an object called url_debates</span></span>
<span><span class="va">url_debates</span> <span class="op">&lt;-</span> <span class="st">"https://www.presidency.ucsb.edu/advanced-search?field-keywords=&amp;field-keywords2=&amp;field-keywords3=&amp;from%5Bdate%5D=01-01-2020&amp;to%5Bdate%5D=12-31-2020&amp;person2=200301&amp;category2%5B%5D=64&amp;items_per_page=50"</span></span>
<span></span>
<span><span class="va">source_page</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html">read_html</a></span><span class="op">(</span><span class="va">url_debates</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get debate meta-data</span></span>
<span></span>
<span><span class="va">nodes_pres</span> <span class="op">&lt;-</span> <span class="st">".views-field-title a"</span></span>
<span><span class="va">text_pres</span> <span class="op">&lt;-</span> <span class="st">".views-field-field-docs-start-date-time-value.text-nowrap"</span></span>
<span></span>
<span><span class="va">debates_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>    location <span class="op">=</span> <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_text.html">html_text</a></span><span class="op">(</span><span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="va">source_page</span>, <span class="va">nodes_pres</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    date <span class="op">=</span>  <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_text.html">html_text</a></span><span class="op">(</span><span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="va">source_page</span>, <span class="va">text_pres</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># format the date</span></span>
<span><span class="va">debates_meta</span><span class="op">$</span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/trimws.html">trimws</a></span><span class="op">(</span><span class="va">debates_meta</span><span class="op">$</span><span class="va">date</span><span class="op">)</span>, </span>
<span>                             format <span class="op">=</span> <span class="st">"%b %d, %Y"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get debate URLs</span></span>
<span><span class="va">debates_links</span> <span class="op">&lt;-</span> <span class="va">source_page</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="st">".views-field-title a"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_attr.html">html_attr</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"href"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># add first part of URL to debate links</span></span>
<span><span class="va">debates_links</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"https://www.presidency.ucsb.edu"</span>, <span class="va">debates_links</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># scrape search results</span></span>
<span><span class="va">debates_scraped</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">debates_links</span>, <span class="va">read_html</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get character vector, one element per debate</span></span>
<span><span class="va">debates_text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">debates_scraped</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"p"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>        <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_text.html">html_text</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span>collapse <span class="op">=</span> <span class="st">"\n\n"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Having retrieved the text of the two debates, we clean up the character vector. More specifically, we clean up the details on the location using regular expressions and the <strong>stringr</strong> package (see Chapter @ref(appendix-regex)).</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">debates_meta</span><span class="op">$</span><span class="va">location</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">debates_meta</span><span class="op">$</span><span class="va">location</span>, <span class="st">"^.* in "</span>, <span class="st">""</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="creating-a-text-corpus" class="level3" data-number="1.2.2"><h3 data-number="1.2.2" class="anchored" data-anchor-id="creating-a-text-corpus">
<span class="header-section-number">1.2.2</span> Creating a text corpus</h3>
<p>Now we have two objects. The character vector <code>debates_text</code> contains the text of both debates, and the data frame <code>debates_meta</code> stores the date and location of both debates. These objects allow us to create a <strong>quanteda</strong> corpus, with the metadata. We use the <code><a href="https://quanteda.io/reference/corpus.html">corpus()</a></code> function, specify the location of the document-level variables, and assign the corpus to an object called <code>data_corpus_debates</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_corpus_debates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">debates_text</span>, </span>
<span>                              docvars <span class="op">=</span> <span class="va">debates_meta</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check the number of documents included in the text corpus</span></span>
<span><span class="fu"><a href="https://quanteda.io/reference/ndoc.html">ndoc</a></span><span class="op">(</span><span class="va">data_corpus_debates</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>The object <code>data_corpus_debates</code> contains two documents, one for each debate. While this unit of analysis may be suitable for some analyses, we want to identify all utterances by the moderator and the two candidates. With the function <code><a href="https://quanteda.io/reference/corpus_segment.html">corpus_segment()</a></code>, we can segment the corpus into statements. The unit of analysis changes from a full debate to a statement during a debate. Inspecting the page for one of the debates<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> reveals that a new utterance starts with the speaker’s name in ALL CAPS, followed by a colon. We use this consistent pattern for segmenting the corpus to the level of utterances. The regular expression <code>"\\s*[[:upper:]]+:\\s+"</code> identifies speaker names in ALL CAPS (<code>\\s*[[:upper:]]+</code>), followed by a colon <code>+:</code> and a white space <code>\\s+</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_corpus_debatesseg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/corpus_segment.html">corpus_segment</a></span><span class="op">(</span><span class="va">data_corpus_debates</span>, </span>
<span>                                         pattern <span class="op">=</span>  <span class="st">"\\s*[[:upper:]]+:\\s+"</span>, </span>
<span>                                         valuetype <span class="op">=</span> <span class="st">"regex"</span>, </span>
<span>                                         case_insensitive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">data_corpus_debatesseg</span>, n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Corpus consisting of 1207 documents, showing 4 documents:

    Text Types Tokens Sentences        location       date       pattern
 text1.1   139    251        13 Cleveland, Ohio 2020-09-29 \n\nWALLACE: 
 text1.2     6      6         1 Cleveland, Ohio 2020-09-29   \n\nBIDEN: 
 text1.3     5      5         1 Cleveland, Ohio 2020-09-29   \n\nTRUMP: 
 text1.4     3      3         1 Cleveland, Ohio 2020-09-29   \n\nBIDEN: </code></pre>
</div>
</div>
<p>The segmentation results in a new corpus consisting of 1,207 utterances. The <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function provides a useful overview of each utterance. The first text, for example, contains 251 tokens, 139 types (i.e., unique tokens) and 13 sentences.</p>
<p>Having segmented the corpus, we improve the document-level variables since such meta information on each document is crucial for subsequent analyses like subsetting the corpus or grouping the corpus to the level of speakers. We create a new document-level variable called “speaker” based on the pattern extracted above.</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># str_trim() removes empty whitespaces, </span></span>
<span><span class="co"># str_remove_all() removes the colons,</span></span>
<span><span class="co"># and str_to_title() changes speaker names </span></span>
<span><span class="co"># from UPPER CASE to Title Case</span></span>
<span></span>
<span><span class="va">data_corpus_debatesseg</span> <span class="op">&lt;-</span> <span class="va">data_corpus_debatesseg</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>speaker <span class="op">=</span> <span class="va">pattern</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>speaker <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim</a></span><span class="op">(</span><span class="va">speaker</span><span class="op">)</span>,</span>
<span>           speaker <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove_all</a></span><span class="op">(</span><span class="va">speaker</span>, <span class="st">":"</span><span class="op">)</span>,</span>
<span>           speaker <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title</a></span><span class="op">(</span><span class="va">speaker</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># cross-table of speaker statements by debate</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">data_corpus_debatesseg</span><span class="op">$</span><span class="va">speaker</span>,</span>
<span>      <span class="va">data_corpus_debatesseg</span><span class="op">$</span><span class="va">location</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         
          Cleveland, Ohio Nashville, Tennessee
  Biden               269                   84
  Trump               340                  122
  Wallace             246                    0
  Welker                0                  146</code></pre>
</div>
</div>
<p>The cross-table reports the number of statement by each speaker in each debate. The first debate in Cleveland seems to be longer: the number of Trump’s and Biden’s statements during the Cleveland debates are three times higher than those in Tennessee. The transcript reports 246 utterances by Chris Wallace during the first and 146 by Kristen Welker during the second debate. We can inspect all cleaned document-level variables in this text corpus.</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_corpus_debatesseg</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/docvars.html">docvars</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,207
Columns: 3
$ location &lt;chr&gt; "Cleveland, Ohio", "Cleveland, Ohio", "Cleveland, Ohio", "Cle…
$ date     &lt;date&gt; 2020-09-29, 2020-09-29, 2020-09-29, 2020-09-29, 2020-09-29, …
$ speaker  &lt;chr&gt; "Wallace", "Biden", "Trump", "Biden", "Wallace", "Trump", "Wa…</code></pre>
</div>
</div>
</section><section id="tokenizing-a-corpus" class="level3" data-number="1.2.3"><h3 data-number="1.2.3" class="anchored" data-anchor-id="tokenizing-a-corpus">
<span class="header-section-number">1.2.3</span> Tokenizing a corpus</h3>
<p>Next, we tokenize our text corpus. Typically, tokenization involves separating texts by white spaces. We tokenize the text corpus without any pre-processing using <code><a href="https://quanteda.io/reference/tokens.html">tokens()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">toks_usdebates2020</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_debatesseg</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># let's inspect the first six tokens of the first four documents</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">toks_usdebates2020</span>, max_ndoc <span class="op">=</span> <span class="fl">4</span>, max_ntoken <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Tokens consisting of 1,207 documents and 3 docvars.
text1.1 :
[1] "Good"      "evening"   "from"      "the"       "Health"    "Education"
[ ... and 245 more ]

text1.2 :
[1] "How"   "you"   "doing" ","     "man"   "?"    

text1.3 :
[1] "How"   "are"   "you"   "doing" "?"    

text1.4 :
[1] "I'm"  "well" "."   

[ reached max_ndoc ... 1,203 more documents ]</code></pre>
</div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://quanteda.io/reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_debatesseg</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Tokens consisting of 1,207 documents and 3 docvars.
text1.1 :
 [1] "Good"       "evening"    "from"       "the"        "Health"    
 [6] "Education"  "Campus"     "of"         "Case"       "Western"   
[11] "Reserve"    "University"
[ ... and 239 more ]

text1.2 :
[1] "How"   "you"   "doing" ","     "man"   "?"    

text1.3 :
[1] "How"   "are"   "you"   "doing" "?"    

text1.4 :
[1] "I'm"  "well" "."   

text1.5 :
 [1] "Gentlemen" ","         "a"         "lot"       "of"        "people"   
 [7] "been"      "waiting"   "for"       "this"      "night"     ","        
[ ... and 137 more ]

text1.6 :
 [1] "Thank" "you"   "very"  "much"  ","     "Chris" "."     "I"     "will" 
[10] "tell"  "you"   "very" 
[ ... and 282 more ]

[ reached max_ndoc ... 1,201 more documents ]</code></pre>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># check number of tokens and types</span></span>
<span><span class="va">toks_usdebates2020</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/ntoken.html">ntoken</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 43742</code></pre>
</div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">toks_usdebates2020</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/ntoken.html">ntype</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 28174</code></pre>
</div>
</div>
<p>Without any pre-processing, the corpus consists of 43,742 tokens and 28,174 types. We can easily check how these numbers change when transforming all tokens to lowercase and removing punctuation characters.</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">toks_usdebates2020_reduced</span> <span class="op">&lt;-</span> <span class="va">toks_usdebates2020</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens.html">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens_tolower.html">tokens_tolower</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check number of tokens and types</span></span>
<span><span class="va">toks_usdebates2020_reduced</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/ntoken.html">ntoken</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 36740</code></pre>
</div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">toks_usdebates2020_reduced</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/ntoken.html">ntype</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24965</code></pre>
</div>
</div>
<p>The number of tokens and types decreases to 36,740 and 28,174, respectively, after removing punctuation and harmonizing all terms to lowercase.</p>
</section><section id="keywords-in-context" class="level3" data-number="1.2.4"><h3 data-number="1.2.4" class="anchored" data-anchor-id="keywords-in-context">
<span class="header-section-number">1.2.4</span> Keywords-in-context</h3>
<p>In contrast to a document-feature matrix (covered below), tokens objects still preserve the order of words. We can use tokens objects to identify the occurrence of keywords and their immediate context.</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">kw_america</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">toks_usdebates2020</span>, </span>
<span>                   pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"america"</span><span class="op">)</span>,</span>
<span>                   window <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># number of mentions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">kw_america</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18</code></pre>
</div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># print first 6 mentions of America and the context of ±2 words</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">kw_america</span>, n <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                                     
 [text1.284, 66]        towns in | America | , how   
 [text1.290, 80]       states in | America | with a  
 [text1.290, 96]       States of | America | , and   
  [text1.335, 5] worst president | America | has ever
 [text1.489, 37]        whole of | America | . But   
 [text1.500, 53]      applied in | America | ."      </code></pre>
</div>
</div>
</section><section id="text-processing" class="level3" data-number="1.2.5"><h3 data-number="1.2.5" class="anchored" data-anchor-id="text-processing">
<span class="header-section-number">1.2.5</span> Text processing</h3>
<p>The keywords-in-context analysis above reveals that all terms are still in upper case and that very frequent, uninformative words (so-called stopwords) and punctuation are still part of the text. In most applications, we remove very frequent features and transform all words to lowercase. The code below shows how to adjust the object accordingly.</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">toks_usdebates2020_processed</span> <span class="op">&lt;-</span> <span class="va">data_corpus_debatesseg</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens.html">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens_tolower.html">tokens_tolower</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s inspect if the changes have been implemented as we expect by calling <code><a href="https://quanteda.io/reference/kwic.html">kwic()</a></code> on the new tokens object.</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">kw_america_processed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">toks_usdebates2020_processed</span>, </span>
<span>                             pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"america"</span><span class="op">)</span>,</span>
<span>                             window <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print first 6 mentions of America and the context of ±2 words</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">kw_america_processed</span>, n <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                                                 
 [text1.284, 32]     class towns | america | well guy            
 [text1.290, 29]     half states | america | significant increase
 [text1.290, 38]   united states | america | wants open          
  [text1.335, 3] worst president | america | ever come           
 [text1.489, 15]  equality whole | america | never accomplished  
 [text1.500, 25] equally applied | america | believe separate    </code></pre>
</div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># test: print as table+</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span>
<span><span class="va">kw_america_processed</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>Pre <span class="op">=</span> <span class="va">pre</span>, Keyword <span class="op">=</span> <span class="va">keyword</span>, Post <span class="op">=</span> <span class="va">post</span>, Pattern <span class="op">=</span> <span class="va">pattern</span><span class="op">)</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>booktabs <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>latex_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"scale_down"</span><span class="op">)</span>, html_font <span class="op">=</span> <span class="st">"Source Sans Pro"</span>, full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table" style="font-family: Source Sans Pro; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;"> Pre </th>
   <th style="text-align:left;"> Keyword </th>
   <th style="text-align:left;"> Post </th>
   <th style="text-align:left;"> Pattern </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> class towns </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> well guy </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> half states </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> significant increase </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> united states </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> wants open </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> worst president </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> ever come </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> equality whole </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> never accomplished </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> equally applied </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> believe separate </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> defeat racism </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> increase homicides </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> summer particularly </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> less violence </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> today president </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> fired plant </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> one's going </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> fire plant </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> going move </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> united states </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> situation thousands </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> every company </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> blow away </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> united states </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> united states </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> anybody seeking </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> section race </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> want talk </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> institutional racism </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> always said </td>
   <td style="text-align:left;"> america </td>
  </tr>
<tr>
<td style="text-align:left;"> growing industry </td>
   <td style="text-align:left;"> america </td>
   <td style="text-align:left;"> electric excuse </td>
   <td style="text-align:left;"> america </td>
  </tr>
</tbody>
</table>
</div>
</div>
<p>The processing of the tokens object worked as expected. Let’s imagine we want to group the documents by debate and speaker, resulting in two documents for Trump, two for Biden, and one for each moderator. <code><a href="https://quanteda.io/reference/tokens_group.html">tokens_group()</a></code> allows us to change the unit of analysis. After aggregating the documents, we can use the function <code><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_xray.html">textplot_xray()</a></code> to observe the occurrences of specific keywords during the debates.</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># new document-level variable with date and speaker</span></span>
<span><span class="va">toks_usdebates2020</span><span class="op">$</span><span class="va">speaker_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span></span>
<span>    <span class="va">toks_usdebates2020</span><span class="op">$</span><span class="va">speaker</span>,</span>
<span>    <span class="va">toks_usdebates2020</span><span class="op">$</span><span class="va">date</span>,</span>
<span>    sep <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># reshape the tokens object to speaker-date level </span></span>
<span><span class="co"># and keep only Trump and Biden</span></span>
<span><span class="va">toks_usdebates2020_grouped</span> <span class="op">&lt;-</span> <span class="va">toks_usdebates2020</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens_subset.html">tokens_subset</a></span><span class="op">(</span><span class="va">speaker</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Trump"</span>, <span class="st">"Biden"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens_group.html">tokens_group</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="va">speaker_date</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check number of documents</span></span>
<span><span class="fu"><a href="https://quanteda.io/reference/ndoc.html">ndoc</a></span><span class="op">(</span><span class="va">toks_usdebates2020_grouped</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># use absolute position of the token in the document</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_xray.html">textplot_xray</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">toks_usdebates2020_grouped</span>, pattern <span class="op">=</span> <span class="st">"america"</span><span class="op">)</span>, </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">toks_usdebates2020_grouped</span>, pattern <span class="op">=</span> <span class="st">"tax*"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-intro_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The grouped document also allows us to check how often each candidate spoke during the debate.</p>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://quanteda.io/reference/ntoken.html">ntoken</a></span><span class="op">(</span><span class="va">toks_usdebates2020_grouped</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Biden, 2020-09-29 Biden, 2020-10-22 Trump, 2020-09-29 Trump, 2020-10-22 
             7996              8093              8973              9016 </code></pre>
</div>
</div>
<p>The number of tokens between Trump and Biden do not differ substantively in both debates. Trump’s share of speech is only slightly higher than Biden’s (7996 v 8093 tokens; 8973 v 9016 tokens).</p>
</section><section id="identifying-multiword-expressions" class="level3" data-number="1.2.6"><h3 data-number="1.2.6" class="anchored" data-anchor-id="identifying-multiword-expressions">
<span class="header-section-number">1.2.6</span> Identifying multiword expressions</h3>
<p>Many languages build on multiword expressions. For instance, “income” and “tax” as separate unigrams have a different meaning than the bigram “income tax”. The package <strong>quanteda.textstats</strong> includes the function <code>textstat_collocation()</code> that automatically retrieves common multiword expressions.</p>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tstat_coll</span> <span class="op">&lt;-</span> <span class="va">data_corpus_debatesseg</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens.html">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span>, padding <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/textstat_collocations.html">textstat_collocations</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, min_count <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># for illustration purposes select the first 20 collocations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tstat_coll</span>, <span class="fl">20</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       collocation count count_nested length   lambda        z
1  president trump    71           44      2 6.928550 22.01175
2        make sure    30            4      2 7.439572 21.53052
3  president biden    52           52      2 6.450825 20.63073
4     mr president    34           21      2 5.389748 19.78036
5      health care    20           15      2 7.580147 19.32484
6       number one    18           16      2 5.595991 17.94433
7        right now    18           12      2 4.801444 16.82701
8       number two    15           11      2 5.472508 16.69323
9     half million    15           13      2 6.852610 16.55670
10         mr vice    15           15      2 5.323919 16.52522
11      four years    19           15      2 7.433288 16.49838
12 american people    22            4      2 4.969408 16.44720
13     two minutes    28           19      2 8.504176 16.09104
14       come back    12            7      2 5.537489 15.46566
15     three years    12            5      2 5.464293 15.20941
16      one number    12           12      2 5.122270 14.65987
17  climate change    11            8      2 8.963835 14.65614
18  million people    18           18      2 4.073645 14.42229
19  final question    14            7      2 7.008316 14.40121
20  vice president    99           81      2 9.070192 14.05817</code></pre>
</div>
</div>
<p>We can use <code><a href="https://quanteda.io/reference/tokens_compound.html">tokens_compound()</a></code> to compound certain multiword expressions before creating a document-feature matrix which does not consider word order. For illustration purposes, we compound <code>climate change</code> ,<code>social securit*</code>, and <code>health insurance*</code>. By default, compounded tokens are concatenated by <code>_</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">toks_usdebates2020_comp</span> <span class="op">&lt;-</span> <span class="va">toks_usdebates2020</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens.html">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens_compound.html">tokens_compound</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="fu"><a href="https://quanteda.io/reference/phrase.html">phrase</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"climate change"</span>,</span>
<span>                                       <span class="st">"social securit*"</span>,</span>
<span>                                       <span class="st">"health insuranc*"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="document-feature-matrix" class="level3" data-number="1.2.7"><h3 data-number="1.2.7" class="anchored" data-anchor-id="document-feature-matrix">
<span class="header-section-number">1.2.7</span> Document-feature matrix</h3>
<p>We have come a long way already. We downloaded debate transcripts, segmented the texts to utterances, added document-level variables, tokenized the corpus, inspected keywords, and compounded multiword expressions. Next, we transform our tokens object into a document-feature matrix (dfm). A dfm counts the occurrences of tokens in each document. We can create a document feature matrix, print the structure, and get the most frequent words.</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dfmat_presdebates20</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html">dfm</a></span><span class="op">(</span><span class="va">toks_usdebates2020_comp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># most frequent features</span></span>
<span><span class="fu"><a href="https://quanteda.io/reference/topfeatures.html">topfeatures</a></span><span class="op">(</span><span class="va">dfmat_presdebates20</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>president     going    people      said      know      want       get       say 
      288       278       259       164       139       129       119       114 
     look      vice 
      105       101 </code></pre>
</div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># most frequent features by speaker</span></span>
<span></span>
<span><span class="fu"><a href="https://quanteda.io/reference/topfeatures.html">topfeatures</a></span><span class="op">(</span><span class="va">dfmat_presdebates20</span>, groups <span class="op">=</span> <span class="va">speaker</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Biden
    going    people      fact      said       get      make      know president 
      126       119        72        62        54        46        46        45 
     sure       can 
       44        43 

$Trump
people  going   know   said   look   want    joe   done    say  think 
   111     92     85     77     65     62     55     55     54     52 

$Wallace
president       sir     going  question        mr      vice     trump        go 
      110        56        44        39        39        36        33        30 
      two     right 
       28        25 

$Welker
president      vice     trump     biden  question     right       let      move 
      100        52        39        35        31        28        28        24 
     talk      want 
       21        18 </code></pre>
</div>
</div>
<p>Many methods build on document-feature matrices and the “bag-of-words” approach. In this section, we introduce <code><a href="https://quanteda.io/reference/textstat_keyness.html">textstat_keyness()</a></code>, which identifies features that occur differentially across different categories – in our case, Trump’s and Biden’s utterances. The function <code><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_keyness.html">textplot_keyness()</a></code> provides a straightforward way of visualize the results of the keyness analysis (Figure (fig:keynesspres).)</p>
<div class="cell">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tstat_key</span> <span class="op">&lt;-</span> <span class="va">dfmat_presdebates20</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/dfm_subset.html">dfm_subset</a></span><span class="op">(</span><span class="va">speaker</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Trump"</span>, <span class="st">"Biden"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/dfm_group.html">dfm_group</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="va">speaker</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/textstat_keyness.html">textstat_keyness</a></span><span class="op">(</span>target <span class="op">=</span> <span class="st">"Trump"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_keyness.html">textplot_keyness</a></span><span class="op">(</span><span class="va">tstat_key</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-intro_files/figure-html/keynesspres-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="bringing-it-all-together-sentiment-analysis" class="level3" data-number="1.2.8"><h3 data-number="1.2.8" class="anchored" data-anchor-id="bringing-it-all-together-sentiment-analysis">
<span class="header-section-number">1.2.8</span> Bringing it all together: Sentiment analysis</h3>
<p>Before introducing the R Basics in the next chapter, we show how to conduct a dictionary-based sentiment analysis using the Lexicoder Sentiment Dictionary <span class="citation" data-cites="young2012">(<a href="references.html#ref-young2012" role="doc-biblioref">Young and Soroka 2012</a>)</span>. The dictionary, included in <strong>quanteda</strong> as <code>data_dictionary_LSD2015</code> contains 1709 positive and 2858 negative terms (as well as their negations). We discuss advanced sentiment analyses with measures of uncertainty in Chapter ??.</p>
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">toks_sent</span> <span class="op">&lt;-</span> <span class="va">toks_usdebates2020</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens_group.html">tokens_group</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="va">speaker</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/tokens_lookup.html">tokens_lookup</a></span><span class="op">(</span>dictionary <span class="op">=</span> <span class="va">data_dictionary_LSD2015</span>,</span>
<span>                  nested_scope <span class="op">=</span> <span class="st">"dictionary"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a dfm with the count of matches,</span></span>
<span><span class="co"># transform object into a data frame,</span></span>
<span><span class="co"># and add document-level variables</span></span>
<span><span class="va">dat_sent</span> <span class="op">&lt;-</span> <span class="va">toks_sent</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/convert.html">convert</a></span><span class="op">(</span>to <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://quanteda.io/reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">toks_sent</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># select Trump and Biden and aggregate sentiment</span></span>
<span><span class="va">dat_sent</span><span class="op">$</span><span class="va">sentiment</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span></span>
<span>    <span class="va">dat_sent</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="op">(</span><span class="va">positive</span> <span class="op">+</span> <span class="va">neg_negative</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">/</span>  </span>
<span>            <span class="op">(</span><span class="va">negative</span> <span class="op">+</span> <span class="va">neg_positive</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat_sent</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   doc_id negative positive neg_positive neg_negative speaker   sentiment
1   Biden      357      465           33            8   Biden  0.19272394
2   Trump      430      509            7            2   Trump  0.15627088
3 Wallace      136      185            0            4 Wallace  0.32806441
4  Welker      106      102            0            0  Welker -0.03828219</code></pre>
</div>
</div>
</section></section><section id="issues" class="level2" data-number="1.3"><h2 data-number="1.3" class="anchored" data-anchor-id="issues">
<span class="header-section-number">1.3</span> Issues</h2>
<p>Some issues raised from the example, where we might have done things differently or added additional analysis.</p>
</section><section id="further-reading" class="level2" data-number="1.4"><h2 data-number="1.4" class="anchored" data-anchor-id="further-reading">
<span class="header-section-number">1.4</span> Further Reading</h2>
<p>Some studies of debate transcripts? Or issues involved in analyzing interactive or “dialogical” documents.</p>
</section><section id="exercises" class="level2" data-number="1.5"><h2 data-number="1.5" class="anchored" data-anchor-id="exercises">
<span class="header-section-number">1.5</span> Exercises</h2>
<p>Add some here.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-rvest" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley. 2021. <em>Rvest: Easily Harvest (Scrape) Web Pages</em>. <a href="https://CRAN.R-project.org/package=rvest">https://CRAN.R-project.org/package=rvest</a>.
</div>
<div id="ref-young2012" class="csl-entry" role="doc-biblioentry">
Young, Lori, and Stuart N. Soroka. 2012. <span>“Affective News: The Automated Coding of Sentiment in Political Texts.”</span> <em>Political Communication</em> 29 (2): 205–31.
</div>
</div>
</section><section class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1" role="doc-endnote"><p>The transcripts are available at https://www.presidency.ucsb.edu/documents/presidential-debate-case-western-reserve-university-cleveland-ohio and https://www.presidency.ucsb.edu/documents/presidential-debate-belmont-university-nashville-tennessee-0.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>https://www.presidency.ucsb.edu/documents/presidential-debate-case-western-reserve-university-cleveland-ohio<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./authors.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">About the Authors</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./02-r-basics.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R Basics</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>